<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="cust_layout :: site-head">
    <link th:href="@{~/bank/vendors/sweetalert/sweetalert.css}" rel="stylesheet"/>
</head>
<body>
<div class="container">
    <header th:replace="cust_layout :: header">
    </header>


    <div class="modal fade" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                    <h4 class="modal-title">Confirm delete</h4>
                </div>
                <div class="modal-body">
                    <p>Are you sure that you want to delete this beneficiary?</p>
                </div>
                <div class="modal-footer">

                    <button type="button" class="del btn btn-danger">Yes</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
<section class="content-wrapper">
    <div class="containe">
        <div class="row">
            <div class="col-md-8 col-sm-8">
                <div class="page_header">
                <h5 > Beneficiary List</h5></div>
                <a th:href="@{/retail/beneficiary/new}" class="pull-right">Add New Beneficiary</a>
            </div>
        </div>
        <div class="row">
            <div class="col-md-9 content-bg">
                <div class=" spacing">
                    <div class="col-md-10">
                        <h4 class="sub_header">Local Beneficiaries</h4>
                        <table class="table" id="mytab">
                            <thead>
                                <td>Name</td>
                                <td>Account Number</td>
                                <td>Bank</td>
                                <td>Delete</td>
                            </thead>
                            <tbody>
                                <tr th:each="loc : ${localBen}">
                                    <td th:text="${loc.accountName}"></td>
                                    <td th:text="${loc.accountNumber}"></td>
                                    <td th:text="${loc.beneficiaryBank}"></td>
                                    <td><a th:id="${loc.id}" onclick="validateDelete(this.id)"><i class="fa fa-trash"></i></a></td>
                                </tr>
                            </tbody>
                        </table>

                        <h4 class="sub_header">International Beneficiaries</h4>
                        <table class="table">
                            <thead>
                                <td>Name</td>
                                <td>Account Number</td>
                                <td>Bank</td>
                                <td>Delete</td>
                            </thead>
                            <tbody>
                                <tr th:each="int : ${intBen}">
                                    <td th:text="${int.accountName}"></td>
                                    <td th:text="${int.accountNumber}"></td>
                                    <td th:text="${int.beneficiaryBank}"></td>
                                    <td ><a th:id="${int.id}" onclick="validateIntDelete(this.id)"><i class="fa fa-trash"></i></a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-3 pull-right " >
                <div th:replace="cust_layout :: sidebar" class="" >
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CONTENT-WRAPPER SECTION END-->
<footer th:replace="cust_layout ::footer">
</footer>
</div>

<script th:src="@{~/bank/vendors/sweetalert/sweetalert.min.js}"></script>
<script th:src="@{~/bank/js/jquery.spring-friendly.min.js}"></script>
<script th:src="@{~/bank/vendors/bootstrap-dialog/js/bootstrap-dialog.js}"></script>


<!-- Page-Level Scripts -->
<script>
    /*<![CDATA[*/

    function validateDelete(id) {
        var ooo = "/retail/beneficiary/"+id+ "/loc/delete";
        //goto url
        warnBeforeRedirect(ooo);
    }

    function validateIntDelete(id) {
        var ooo = "/retail/beneficiary/"+id+ "/int/delete";
        //goto url
        warnBeforeRedirect(ooo);
    }

    function warnBeforeRedirect(ooo) {

        $ ("#myModal").modal('show');
        $('.del').on('click', function(){
            window.location.assign(ooo);
        });

    }

    /*]]>*/
</script>
</body>
</html>